import { Meta, Story, Preview } from '@storybook/addon-docs/blocks'
import { withKnobs } from '@storybook/addon-knobs'
import { Map, BaseLayer, GeoJSON, constants } from '@amsterdam/arm-core'
import { DomEvent } from 'leaflet'
import geoJSONStub from '../stubs/geoJSON.json'

<Meta title="Layers/GeoJSON" decorators={[withKnobs]} />

# GeoJSON

<Preview>
  <Story name="GeoJSON">
    <Map
      fullScreen
      options={{
        ...constants.DEFAULT_AMSTERDAM_MAPS_OPTIONS,
        zoom: 14,
        center: [52.3711013, 4.8893335],
      }}
    >
      <GeoJSON
        args={[geoJSONStub]}
        options={{
          onEachFeature: (feature, layer) => {
            layer.bindPopup(
              `<p>Stadsdeel: ${feature.properties.stadsdeel}</p><p>Straatnaam: ${feature.properties.straatnaam}</p>`,
            )
            layer.on('click', (e) => {
              DomEvent.stopPropagation(e)
              layer.openPopup()
            })
          },
        }}
      />
      <BaseLayer />
    </Map>
  </Story>
</Preview>
